---
title: "Making your R plots accessible with the phsstyles package"
author: "Pauline Ward"
date: "2024-04-30"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE) 
library(here) 
library(readxl)
library(dplyr)
library(ggplot2)

## File location for importing dummy data
path_to_test_data_on_stats <- "/conf/quality_indicators/Benchmarking/Cancer QPIs/Data/new_process/testing/test_data/" 
toenail_hb_hosp_filename <- "Toenail_HB_Hosp_QPI_anonymised.xlsx"

```

# Introduction

The phsstyles package should make it easy to use the official PHS colour scheme
in an accessible way in R plots. 

Several examples are presented here, all using the 
Toenail cancer Quality Performance Indicators dataset, 
ie dummy tabular data produced for this tutorial. 

## Population Pyramid


```{r population_pyramid}
# Import dummy data


```

## Bar chart

You can also embed plots, for example:

```{r regional_network_bar_chart, echo=FALSE}
# Import dummy data
tbl_networks_bar_chart <- read_xlsx(here(path_to_test_data_on_stats, toenail_hb_hosp_filename), sheet = "QPI_performance")
glimpse(tbl_networks_bar_chart) 

```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot. 

## Line graphs

```{r qpi_trend_lines_faceted}
# Import dummy data
if (nrow(tbl_networks_bar_chart)<1){
  tbl_networks_bar_chart <- read_xlsx(here(path_to_data_on_stats, toenail_hb_hosp_filename), sheet = QPI_performance)
}
trend_plot <- tbl_networks_bar_chart |> 
  ggplot(aes(x=as.integer(Cyear), y=PerPerformance)) +
  geom_line() +
  facet_wrap(~ Location)
trend_plot
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

## Appendix: Technical Information 
```{r appendix tech info}
sessionInfo()
``` 
